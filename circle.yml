dependencies:
  override:
    - yarn
test:
  override:
    - yarn test

deployment:
  release:
    tag: /v[0-9]+(\.[0-9]+)*/
    environment:
      REACT_APP_API_URL: api.codesplain.io/prod
    commands:
        - yarn build
        - ./publish release $CIRCLE_TAG
  master:
    branch: master
    environment:
      REACT_APP_API_URL: api.codesplain.io/dev
    commands:
        - REACT_APP_API_URL=$DEV_API
        - yarn build
        - ./publish dev
